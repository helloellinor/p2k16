<p2k16-header active="admin"></p2k16-header>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h1>
        <i class="fa fa-tools"></i> Tools Management
        <small>Manage workspace tools and access</small>
      </h1>

      <div class="row" style="margin-bottom: 20px;">
        <div class="col-sm-6">
          <div class="input-group">
            <input type="text" class="form-control" placeholder="Search tools..." ng-model="ctrl.searchText">
            <span class="input-group-addon">
              <i class="fa fa-search"></i>
            </span>
          </div>
        </div>
        <div class="col-sm-6 text-right">
          <a class="btn btn-success" href="#!/admin/tool/new">
            <i class="fa fa-plus"></i> Create New Tool
          </a>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">
            <i class="fa fa-list"></i> All Tools 
            <span class="badge">{{ (ctrl.tools | filter:ctrl.searchText).length }}</span>
          </h3>
        </div>
        
        <div class="panel-body" ng-if="ctrl.tools.length === 0">
          <div class="text-center text-muted" style="padding: 40px;">
            <i class="fa fa-tools fa-3x" style="margin-bottom: 15px;"></i>
            <h4>No Tools Found</h4>
            <p>Get started by creating your first tool.</p>
            <a class="btn btn-success" href="#!/admin/tool/new">
              <i class="fa fa-plus"></i> Create First Tool
            </a>
          </div>
        </div>

        <div class="table-responsive" ng-if="ctrl.tools.length > 0">
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th class="col-sm-3">
                  <a href="#" ng-click="ctrl.sortBy('name')">
                    Tool Name 
                    <i class="fa fa-sort" ng-class="ctrl.getSortIcon('name')"></i>
                  </a>
                </th>
                <th class="col-sm-4">
                  <a href="#" ng-click="ctrl.sortBy('description')">
                    Description
                    <i class="fa fa-sort" ng-class="ctrl.getSortIcon('description')"></i>
                  </a>
                </th>
                <th class="col-sm-2">
                  <a href="#" ng-click="ctrl.sortBy('circle')">
                    Managing Circle
                    <i class="fa fa-sort" ng-class="ctrl.getSortIcon('circle')"></i>
                  </a>
                </th>
                <th class="col-sm-2">Status</th>
                <th class="col-sm-1 text-center">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="tool in ctrl.tools | filter:ctrl.searchText | orderBy:ctrl.sortField:ctrl.sortReverse">
                <td>
                  <strong>{{ tool.name }}</strong>
                  <br>
                  <small class="text-muted">ID: {{ tool.id }}</small>
                </td>
                <td>
                  <span title="{{ tool.description }}">
                    {{ tool.description | limitTo:80 }}{{ tool.description.length > 80 ? '...' : '' }}
                  </span>
                </td>
                <td>
                  <span class="label label-primary">{{ tool.circle }}</span>
                </td>
                <td>
                  <span class="label label-success">
                    <i class="fa fa-check-circle"></i> Active
                  </span>
                </td>
                <td class="text-center">
                  <div class="btn-group" role="group">
                    <a href="#!/admin/tool/{{ tool.id }}" 
                       class="btn btn-sm btn-default" 
                       title="Edit Tool">
                      <i class="fa fa-edit"></i>
                    </a>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="panel-footer" ng-if="ctrl.tools.length > 0">
          <div class="row">
            <div class="col-sm-6">
              <small class="text-muted">
                Showing {{ (ctrl.tools | filter:ctrl.searchText).length }} of {{ ctrl.tools.length }} tools
              </small>
            </div>
            <div class="col-sm-6 text-right">
              <small class="text-muted">
                Last updated: {{ ctrl.lastUpdated | date:'medium' }}
              </small>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
