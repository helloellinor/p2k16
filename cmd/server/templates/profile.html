{{define "profile"}}
    <h1>User Profile</h1>
    
    {{if .content.data.demoMode}}
        <div class="p2k16-alert p2k16-alert--warning p2k16-mt-6">
            <strong>Demo Mode:</strong> Changes will be simulated but not saved to database
        </div>
    {{end}}
    
    <div class="p2k16-grid p2k16-grid--2-col p2k16-mt-8">
        <div class="p2k16-card">
            <div class="p2k16-card__header">
                <h5 class="p2k16-card__title">Change Password</h5>
            </div>
            <div class="p2k16-card__body">
                <form class="p2k16-form" hx-post="/api/profile/change-password" hx-target="#password-result">
                    <div class="p2k16-field">
                        <label for="oldPassword" class="p2k16-field__label">Current Password</label>
                        <input type="password" class="p2k16-field__input" id="oldPassword" name="oldPassword" required>
                    </div>
                    <div class="p2k16-field">
                        <label for="newPassword" class="p2k16-field__label">New Password</label>
                        <input type="password" class="p2k16-field__input" id="newPassword" name="newPassword" required>
                    </div>
                    <div class="p2k16-field">
                        <label for="confirmPassword" class="p2k16-field__label">Confirm New Password</label>
                        <input type="password" class="p2k16-field__input" id="confirmPassword" name="confirmPassword" required>
                    </div>
                    <button type="submit" class="p2k16-button p2k16-button--primary">Change Password</button>
                </form>
                <div id="password-result" class="p2k16-mt-6"></div>
            </div>
        </div>
        
        <div class="p2k16-card">
            <div class="p2k16-card__header">
                <h5 class="p2k16-card__title">Profile Details</h5>
            </div>
            <div class="p2k16-card__body">
                <form class="p2k16-form" hx-post="/api/profile/update" hx-target="#profile-result">
                    <div class="p2k16-field">
                        <label for="name" class="p2k16-field__label">Full Name</label>
                        <input type="text" class="p2k16-field__input" id="name" name="name" placeholder="Enter your full name">
                        <div class="p2k16-field__help">This will be displayed on your public profile</div>
                    </div>
                    <div class="p2k16-field">
                        <label for="email" class="p2k16-field__label">Email Address</label>
                        <input type="email" class="p2k16-field__input" id="email" name="email" 
                               value="{{.content.data.user.Email}}" readonly>
                        <div class="p2k16-field__help">Contact an administrator to change your email address</div>
                    </div>
                    <div class="p2k16-field">
                        <label for="phone" class="p2k16-field__label">Phone Number</label>
                        <input type="tel" class="p2k16-field__input" id="phone" name="phone" placeholder="Enter your phone number">
                        <div class="p2k16-field__help">Used for emergency contact and door access notifications</div>
                    </div>
                    <button type="submit" class="p2k16-button p2k16-button--primary">Save Changes</button>
                </form>
                <div id="profile-result" class="p2k16-mt-6"></div>
            </div>
        </div>
    </div>
    
    <div class="p2k16-mt-8">
        <h4>Your Badges</h4>
        <div id="user-badges">
            <button class="p2k16-button p2k16-button--primary" hx-get="/api/user/badges" hx-target="#user-badges">Load Your Badges</button>
        </div>
    </div>
    
    <div class="p2k16-mt-8 p2k16-text--center">
        <a href="/dashboard" class="p2k16-button p2k16-button--secondary">Back to Dashboard</a>
        <a href="/" class="p2k16-button p2k16-button--secondary">Home</a>
    </div>
{{end}}